recipes:
  # --- Системні оновлення ---
  system-quick-update:
    name: Quick System Update
    description: Applies a small, non-critical patch to the operating system.
    versions:
      v1.0:
        playbook: playbooks/system/apply_patch_v1.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 4
      v2.0:
        playbook: playbooks/system/apply_patch_v2.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 4

  # --- Рецепти для розгортання сервісів ---
  deploy-monitoring-service:
    name: Deploy Monitoring Service
    description: Deploys the main monitoring service on the target nodes.
    versions:
      v12.0:
        playbook: playbooks/services/deploy_monitoring.yml
        metadata:
          supported_arch:
            - arm64
          minimum_ram_gb: 8
          options:
            - name: service_port
              description: The port number for the monitoring service.
            - name: target_host
              description: The hostname or IP address of the target server.

  # --- Тестові сценарії для перевірки валідації ---
  test-config-options-mismatch:
    name: Test Case - Mismatched Options
    description: A test recipe to verify handling of different options between versions.
    versions:
      v2.0:
        playbook: playbooks/tests/validate_options.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 6
          options:
            - name: feature_flag
              description: Toggles the beta feature.
            - name: node_id
              description: The specific node identifier.
      v2.2:
        playbook: playbooks/tests/validate_options.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 6
          options:
            - name: feature_flag
              description: Toggles the beta feature.
            - name: node_id
              description: The specific node identifier.
            - name: enable_logging # Нова опція, якої не було в v2.0
              description: Enables verbose logging.

  test-incompatible-architecture:
    name: Test Case - Incompatible Architecture
    description: A test recipe to verify behavior on unsupported ARM64 architecture.
    versions:
      v3.0:
        playbook: playbooks/tests/validate_architecture.yml
        metadata:
          supported_arch:
            - arm64
          minimum_ram_gb: 2

  test-insufficient-ram:
    name: Test Case - Insufficient RAM
    description: A test recipe to verify behavior when system RAM is too low.
    versions:
      v4.0:
        playbook: playbooks/tests/validate_ram.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 8 # Ця версія вимагає 8 ГБ
      v4.1:
        playbook: playbooks/tests/validate_ram.yml
        metadata:
          supported_arch:
            - x86_64
          minimum_ram_gb: 16 # А ця вже 16 ГБ

  test-multiple-failures:
    name: Test Case - Multiple Failure Conditions
    description: Verifies handling of several issues at once (arch, ram, options).
    versions:
      v1.0:
        playbook: playbooks/tests/validate_all.yml
        metadata:
          supported_arch:
            - arm64 # Потенційна несумісність
          minimum_ram_gb: 2
          options:
            - name: config_path
              description: Path to the main
